<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Form | Strawberry Farm</title>
    <meta name="description" content="Web Development Notes">
    <meta name="generator" content="VitePress v1.0.0-rc.45">
    <link rel="preload stylesheet" href="/assets/style.3b3KDsLc.css" as="style">
    
    <script type="module" src="/assets/app.qqmQhh5j.js"></script>
    <link rel="modulepreload" href="/assets/chunks/framework.q6r8hxCe.js">
    <link rel="modulepreload" href="/assets/chunks/theme.KnmxTxGm.js">
    <link rel="modulepreload" href="/assets/components_Form.md.gFbBDOEJ.lean.js">
    <link rel="icon" href="/favicon.ico">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="VPLayout"><aside class="VPSidebar [#]"><div class="QuickAccess"><button class="mat:dust" title="切换深色模式" aria-pressed="false"><svg viewBox="0 0 22 22"><path d="M8 19H14V21H8V19M8 18V14H7V13H6V12H5V11H4V5H5V4H6V3H7V2H8V1H14V2L15 2V3H16V4H17V5H18V11H17V12H16V13H15V14H14V18H8M13 12H14V11H15V10H16V6H15V5H14V4L13 4V3H9V4H8V5H7V6H6V10H7V11H8V12H9V13H10V16H12V13H13V12Z"></path></svg></button><button class="mat:dust" title="切换默认字体（调试用，思源在相同行高下汉字的位置会偏下一点）" aria-pressed="false"><svg viewBox="0 0 22 22"><path d="M15 19H6V17H7V5H6V3H13V4H14V5H15V6H16V10H15V12H16V13H17V17H16V18H15M12 10V9H13V7H12V6H10V10M13 16V15H14V14H13V13H10V16Z"></path></svg></button></div><nav class="nav" id="VPSidebarNav" aria-label="Sidebar Navigation" tabindex="-1"><!--[--><div class="VPSidebarItem--Group f2 py-4" aria-label="Intro"><!--[--><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/"><!--[--><span class="text">Home</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/Guide"><!--[--><span class="text">Guide</span><!--]--></a></div><!--]--></div><div class="VPSidebarItem--Group f2 py-4" aria-label="CSS"><!--[--><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/css/Intro"><!--[--><span class="text">Intro</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/css/Reset"><!--[--><span class="text">Reset</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/css/Breakpoints"><!--[--><span class="text">Breakpoints</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/css/Flexbox"><!--[--><span class="text">Flexbox</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/css/Typography"><!--[--><span class="text">Typography</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/css/Box"><!--[--><span class="text">Box</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/css/Positioning"><!--[--><span class="text">Positioning</span><!--]--></a></div><!--]--></div><div class="VPSidebarItem--Group f2 py-4" aria-label="Learn"><!--[--><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/learn/Intro"><!--[--><span class="text">Intro</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/learn/BoxModel"><!--[--><span class="text">BoxModel</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/learn/Overflow"><!--[--><span class="text">Overflow</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/learn/Sizing"><!--[--><span class="text">Sizing</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/learn/Background"><!--[--><span class="text">Background</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/learn/Form"><!--[--><span class="text">Form</span><!--]--></a></div><!--]--></div><div class="VPSidebarItem--Group f2 py-4" aria-label="Design"><!--[--><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/design/Color"><!--[--><span class="text">Color</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/design/Typography"><!--[--><span class="text">Typography</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/design/Sizing"><!--[--><span class="text">Sizing</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/design/Interaction"><!--[--><span class="text">Interaction</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/design/Collapse"><!--[--><span class="text">Collapse</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/design/Alert"><!--[--><span class="text">Alert</span><!--]--></a></div><!--]--></div><div class="VPSidebarItem--Group f2 py-4" aria-label="Components"><!--[--><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/components/Button"><!--[--><span class="text">Button</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/components/Input"><!--[--><span class="text">Input</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/components/Select"><!--[--><span class="text">Select</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/components/RadioGroup"><!--[--><span class="text">RadioGroup</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link active [...] [A] [FC] link px-6 f2 mat:air" href="/components/Form"><!--[--><span class="text">Form</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/components/Farm"><!--[--><span class="text">Farm</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/components/Table"><!--[--><span class="text">Table</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/components/Toast"><!--[--><span class="text">Toast</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/components/Trap"><!--[--><span class="text">Trap</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/components/Modal"><!--[--><span class="text">Modal</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/components/Levitate"><!--[--><span class="text">Levitate</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/components/Icon"><!--[--><span class="text">Icon</span><!--]--></a></div><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/components/FX"><!--[--><span class="text">FX</span><!--]--></a></div><!--]--></div><div class="VPSidebarItem--Group f2 py-4" aria-label="Experiments"><!--[--><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/experiments/Swipe"><!--[--><span class="text">Swipe</span><!--]--></a></div><!--]--></div><div class="VPSidebarItem--Group f2 py-4" aria-label="Examples"><!--[--><div class="VPSidebarItem [#]"><a class="link [...] [A] [FC] link px-6 f2 mat:air" href="/examples/Example"><!--[--><span class="text">Example</span><!--]--></a></div><!--]--></div><!--]--></nav></aside><div class="VPNav [B] [FS]"><button class="mat:air px-5" aria-pressed="false"> Sidebar </button><img src="/favicon.ico"><button class="mat:air px-5" aria-pressed="false"> Outline </button></div><div class="VPMain"><div style="position:relative;" class="VPContent [A] vp-doc" role="article"><div><h1 id="form" tabindex="-1">Form <a class="header-anchor" href="#form" aria-label="Permalink to &quot;Form&quot;">​</a></h1><h6 id="spec" tabindex="-1">Spec <a class="header-anchor" href="#spec" aria-label="Permalink to &quot;Spec&quot;">​</a></h6><ul><li>未显示字段会在提交时会被自动裁剪。</li><li>搬运 <a href="https://www.npmjs.com/package/react-hook-form" target="_blank" rel="noreferrer"><code>react-hook-form</code></a> 的 tsd 为字段定义提供类型推导。</li><li>基于一个完全重写且优化的 <a href="https://github.com/yiminghe/async-validator" target="_blank" rel="noreferrer"><code>async-validator</code></a> 异步校验器，在表单定义字段时能对 <code>valdator</code> 的参数提供类型推导。</li></ul><details class="details custom-block"><summary>更多建议</summary><ul><li><p>上文所述的 “未显示字段” 即 <code>&lt;VFormItem /&gt;</code> 未渲染或正在淡出，即 <code>v-if</code> or <code>:is(.v-leave-active *)</code> 可能纳入考虑？不需要裁剪的字段可以使用 <code>input[type=hidden]</code> 等各种方式，只保证 <code>&lt;VFormItem /&gt;</code> 存在即可。</p></li><li><p>为支持渲染在表单外部的复杂校验规则，如果真实 DOM 存在任何具有 <code>[data-invalid]</code> 属性且不满足 <code>:is(.v-leave-active *)</code> 的元素，<code>VForm</code> 会阻止提交。并尝试通过 DOM API 聚焦它所属的 <code>&lt;VFormItem /&gt;</code>。例：<code>&lt;div hidden data-invalid /&gt;</code>。</p></li><li><p>泛型只限制输入值，而输出值由于存在修剪功能不能保证。</p></li><li><p><code>&lt;VFormItem /&gt;</code> 不是泛型组件，大多数和类型推导相关的功能都应该在脚本里处理。</p></li><li><p><code>strawberry-farm</code> 的 <code>&lt;VFormItem /&gt;</code> 会将 <code>validator</code> 的 Range 修饰翻译成 <code>min</code> <code>max-length</code> <code>aria-value-min</code> 等 HTML 原生属性作用在自定义控件上，使用者在实现自定义控件时可以考虑支持。</p></li><li><p>上述所有的聚焦行为不仅包括 <code>Element.focus()</code>，还包括 <code>Element.scrollIntoView()</code>。聚焦会尝试查找引用的 <code>focus()</code> 函数（针对 Input 的优化，必须用 <code>div</code> 包住 <code>&lt;input /&gt;</code> 实现布局），如果没有，则会调用 <code>el</code>，自定义组件必须支持 <code>el</code>。</p></li><li><p>HTML 标准规定 <code>&lt;form /&gt;</code> 元素不能嵌套（可以用对话框（ <code>&lt;Teleport to=&quot;body&quot; /&gt;</code> ）将业务逻辑拆分以避免嵌套）</p></li><li><p>HTML <code>&lt;form /&gt;</code> 元素不会提交 <code>disabled</code> 的控件（<code>react-hook-form</code> 也是这么处理的），然而在 <code>strawberry-farm</code> 里， 只有不可见控件的值才会被裁剪。这种处理比较主观，但是如果用 <code>readonly</code> 替代，诸如 <code>&lt;select&gt;</code> <code>[type=&quot;radio&quot;]</code> <code>[type=&quot;checkbox&quot;]</code> 反而不支持这个 <code>readonly</code> 属性，真是鸡肋，所以还是按照可见即提交吧，毕竟这个年头很难见到原生 HTML <code>&lt;form /&gt;</code> 发起真正的提交了。</p></li><li><p>取决于自定义控件，需要支持 <kbd>Enter</kbd> 向上查找表单并发起提交，因为这是 HTML <code>&lt;form /&gt;</code> 的默认行为。</p></li></ul><blockquote><p>太长不看: <strong>添加 submit 按钮即可支持隐式提交表单,即支持回车键提交</strong></p><p>4.10.21.2 Implicit submission A form element&#39;s default button is the first submit button in tree order whose form owner is that form element.</p><p>If the user agent supports letting the user submit a form implicitly (for example, on some platforms hitting the &quot;enter&quot; key while a text control is focused implicitly submits the form), then doing so for a form, whose default button has activation behavior and is not disabled, must cause the user agent to fire a click event at that default button.</p><p>There are pages on the web that are only usable if there is a way to implicitly submit forms, so user agents are strongly encouraged to support this.</p><p>If the form has no submit button, then the implicit submission mechanism must do nothing if the form has more than one field that blocks implicit submission, and must submit the form element from the form element itself otherwise.</p><p>For the purpose of the previous paragraph, an element is a field that blocks implicit submission of a form element if it is an input element whose form owner is that form element and whose type attribute is in one of the following states: Text, Search, URL, Telephone, Email, Password, Date, Month, Week, Time, Local Date and Time, Number</p><p><a href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#implicit-submission" target="_blank" rel="noreferrer">HTML Spec form-control-infrastructure.implicit-submission</a></p><p><a href="https://www.tjvantoll.com/2013/01/01/enter-should-submit-forms-stop-messing-with-that/" target="_blank" rel="noreferrer">The Enter Key should Submit Forms, Stop Suppressing it</a></p></blockquote><blockquote><p>W3C 标准中有如下规定：</p><p>When there is only one single-line text input field in a form, the user agent should accept Enter in that field as a request to submit the form.</p><p>即：当一个 form 元素中只有一个输入框时，在该输入框中按下回车应提交该表单。如果希望阻止这一默认行为，可以在 el-form 标签上添加 @submit.native.prevent。</p><p><a href="https://element-plus.org/#/zh-CN/component/form" target="_blank" rel="noreferrer">https://element-plus.org/#/zh-CN/component/form</a></p></blockquote></details><div class="VPDemo undoc"><div><!----></div><details><summary class="mat:air p-10 f2 fw6 [B] [CS]"><svg viewBox="0 0 22 22"><path d="M19 2V20H18V21H4V20H3V18H1V16H3V12H1V10H3V6H1V4H3V2H4V1H18V2H19M14 9H13V8H12V9H11V10H10V3H7V19H17V3H15V10H14V9M3 4V6H5V4H3M5 10H3V12H5V10M5 16H3V18H5V16Z"></path></svg> Code </summary><div class="language-html vp-code"></div></details></div><h3 id="sign-up" tabindex="-1">Sign up <a class="header-anchor" href="#sign-up" aria-label="Permalink to &quot;Sign up&quot;">​</a></h3><div class="VPDemo undoc"><div><!----></div><details><summary class="mat:air p-10 f2 fw6 [B] [CS]"><svg viewBox="0 0 22 22"><path d="M19 2V20H18V21H4V20H3V18H1V16H3V12H1V10H3V6H1V4H3V2H4V1H18V2H19M14 9H13V8H12V9H11V10H10V3H7V19H17V3H15V10H14V9M3 4V6H5V4H3M5 10H3V12H5V10M5 16H3V18H5V16Z"></path></svg> Code </summary><div class="language-html vp-code"></div></details></div></div></div><aside class="VPOutline [A] f2 empty" style="--vp-outline-opacity:1;--vp-outline-curr:0;--vp-outline-sum:0;"><!----></aside></div></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"components_button.md\":\"P7B5qbMd\",\"css_intro.md\":\"yZlo8AZL\",\"design_sizing.md\":\"VWrbFme6\",\"components_trap.md\":\"op_WZTCh\",\"components_farm.md\":\"c6LrKLuF\",\"learn_intro.md\":\"dbL9Vnu4\",\"design_interaction.md\":\"jRe-UvQd\",\"css_positioning.md\":\"S8G5JUAH\",\"experiments_swipe.md\":\"WBuQPJHq\",\"components_fx.md\":\"P5zXeWUh\",\"design_color.md\":\"nvWQgQUm\",\"design_collapse.md\":\"ExRchnlf\",\"functions_collection.md\":\"QyylF2-e\",\"components_toast.md\":\"V9XpvxDE\",\"css_breakpoints.md\":\"Up9h7WZd\",\"learn_boxmodel.md\":\"zbKrLUbq\",\"components_form.md\":\"gFbBDOEJ\",\"index.md\":\"fO8MMQoW\",\"learn_overflow.md\":\"wIDsr2zN\",\"components_levitate.md\":\"nh9OfzSZ\",\"components_icon.md\":\"R0z9mvgB\",\"learn_form.md\":\"Sn37Jo79\",\"design_alert.md\":\"nPWoplVQ\",\"design_typography.md\":\"RyHQPiwT\",\"components_modal.md\":\"nIVuaT8x\",\"css_box.md\":\"lgJKEFr7\",\"css_reset.md\":\"B2z13wnh\",\"learn_background.md\":\"lVIcEG-e\",\"functions_validator.md\":\"JttAiWpv\",\"examples_example.md\":\"amZraQzh\",\"components_input.md\":\"pAfyHSTN\",\"css_typography.md\":\"qVSFHakv\",\"components_table.md\":\"hvxNzOZh\",\"components_radiogroup.md\":\"2x5dx4kS\",\"components_select.md\":\"-6yhNBv1\",\"learn_sizing.md\":\"PbJz9yGy\",\"css_flexbox.md\":\"yVNvMY03\",\"guide.md\":\"t9yra0gL\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Strawberry Farm\",\"description\":\"Web Development Notes\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>