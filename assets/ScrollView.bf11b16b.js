import{D as e,M as t,R as r,u as n,c as l}from"./vendor.335fc97d.js";import"./index.4fb8a86d.js";import{P as o}from"./PageWalker.d947d174.js";const c=({children:n,wrapStyle:l})=>{const o=e.exports.useRef(null),c=e.exports.useRef(null),[s]=e.exports.useState(t),a=e.exports.useCallback((()=>{o.current&&s.emit("SCROLL",[100*o.current.scrollLeft/o.current.clientWidth,100*o.current.scrollTop/o.current.clientHeight])}),[s]);return e.exports.useEffect((()=>{if(!o.current)return;const e=o.current,t=()=>{if(!o.current)return;const e=100*o.current.clientHeight/o.current.scrollHeight,t=100*o.current.clientWidth/o.current.scrollWidth;s.emit("RESIZE",[t<100?t+"%":"",e<100?e+"%":""])};t();const r=new ResizeObserver((()=>{t()}));return r.observe(e),()=>{r.unobserve(e)}}),[s]),r.createElement("div",{className:"st-scroll-view-wrap",style:l,ref:c},r.createElement("div",{className:"st-scroll-view",ref:o,onScroll:a},n),r.createElement(i,{containerRef:o,wrapRef:c,mitt:s}),r.createElement(i,{vertical:!0,containerRef:o,wrapRef:c,mitt:s}))},s={vertical:{offsetSize:"offsetHeight",scrollValue:"scrollTop",scrollSize:"scrollHeight",size:"height",axis:"Y",mouseEventClientValue:"clientY",clientRectStart:"top"},horizontal:{offsetSize:"offsetWidth",scrollValue:"scrollLeft",scrollSize:"scrollWidth",size:"width",axis:"X",mouseEventClientValue:"clientX",clientRectStart:"left"}},i=({vertical:t,mitt:o,containerRef:c,wrapRef:i})=>{const a=s[t?"vertical":"horizontal"],[u,m]=e.exports.useState("0"),[f,p]=e.exports.useState(0);e.exports.useEffect((()=>{const e=t?1:0;o.on("RESIZE",(t=>m(t[e]))),o.on("SCROLL",(t=>p(t[e])))}),[o,t]);const d=e.exports.useRef(!1),v=e.exports.useRef(!1),[S,h]=e.exports.useState(!1),w=e.exports.useCallback((()=>{!S&&h(!0)}),[S]),E=e.exports.useCallback((()=>{S&&h(!1)}),[S]),b=e.exports.useRef(null),g=e.exports.useRef(null),x=e.exports.useCallback(((e,t)=>{if(!b.current)return;d.current=!0;const r=e=>{if(!g.current)return;if(!c.current)return;const r=100*(e[a.mouseEventClientValue]-g.current.getBoundingClientRect()[a.clientRectStart]-t)/g.current[a.offsetSize];c.current[a.scrollValue]=r/100*c.current[a.scrollSize]},n=e=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",n),d.current=!1,v.current&&E()};document.addEventListener("mousemove",r),document.addEventListener("mouseup",n)}),[a.offsetSize,a.mouseEventClientValue,a.clientRectStart,a.scrollValue,a.scrollSize,c,E]),R=n((e=>{if(e.nativeEvent.stopImmediatePropagation(),e.stopPropagation(),e.ctrlKey||[1,2].includes(e.button))return;if(!b.current)return;const t=e[a.mouseEventClientValue]-b.current.getBoundingClientRect()[a.clientRectStart];x(e,t)})),z=n((e=>{if(e.nativeEvent.stopImmediatePropagation(),e.stopPropagation(),e.ctrlKey||[1,2].includes(e.button))return;if(!g.current)return;if(!b.current)return;if(!c.current)return;const t=b.current[a.offsetSize]/2,r=100*(e[a.mouseEventClientValue]-g.current.getBoundingClientRect()[a.clientRectStart]-t)/c.current[a.offsetSize];if(c.current[a.scrollValue]=r*c.current[a.scrollSize]/100,!b.current)return;x(e,t)}));e.exports.useEffect((()=>{const e=()=>{v.current=!1,w()},t=()=>{v.current=!0,h(d.current)};if(!i.current)return;const r=i.current;return r.addEventListener("mousemove",e),r.addEventListener("mouseleave",t),()=>{r.removeEventListener("mousemove",e),r.removeEventListener("mouseleave",t)}}),[w,i]);const y=function({move:e,size:t,xy:r}){const n=`translate${r.axis}(${e}%)`;return{[r.size]:t,transform:n}}({size:u,move:f,xy:a});return r.createElement("div",{onMouseDown:z,className:l("st-scrollbar",t?"st-scrollbar--vertical":"st-scrollbar--horizontal",S&&"st-scrollbar--visible"),ref:g},r.createElement("div",{className:"st-scrollbar__thumb",style:y,onMouseDown:R,ref:b}))};const a={"/src/st-assets/ScrollView/basic.tsx":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:()=>r.createElement(r.Fragment,null,r.createElement(c,{wrapStyle:{height:200,fontSize:"18px"}},r.createElement("div",{style:{whiteSpace:"pre-wrap"}},". \n".repeat(30))),r.createElement("br",null),r.createElement("br",null),r.createElement(c,{wrapStyle:{height:200,width:200,fontSize:"18px"}},r.createElement("div",{style:{whiteSpace:"nowrap"}},". ".repeat(150))),r.createElement("br",null),r.createElement("br",null),r.createElement(c,{wrapStyle:{height:200,width:200,fontSize:"18px"}},r.createElement("div",null,r.createElement("div",{style:{width:400,height:600,background:"powderblue"}}))))})},u={basic:"import React from 'react';\r\nimport { ScrollView } from 'starfall';\r\n\r\nconst BasicUsage: React.FC = () => {\r\n  return (\r\n    <>\r\n      <ScrollView wrapStyle={{ height: 200, fontSize: '18px' }}>\r\n        <div style={{ whiteSpace: 'pre-wrap' }}>{'. \\n'.repeat(30)}</div>\r\n      </ScrollView>\r\n      <br />\r\n      <br />\r\n      <ScrollView wrapStyle={{ height: 200, width: 200, fontSize: '18px' }}>\r\n        <div style={{ whiteSpace: 'nowrap' }}>{'. '.repeat(150)}</div>\r\n      </ScrollView>\r\n      <br />\r\n      <br />\r\n      <ScrollView wrapStyle={{ height: 200, width: 200, fontSize: '18px' }}>\r\n        <div>\r\n          <div style={{ width: 400, height: 600, background: 'powderblue' }}></div>\r\n        </div>\r\n      </ScrollView>\r\n    </>\r\n  );\r\n};\r\nexport default BasicUsage;\r\n"},m={zh:"## ScrollView 滚动视图\r\n\r\n### 基本用法\r\n\r\n::demo{basic}\r\n\r\n### 原理\r\n\r\n- [mdbootstrap/perfect-scrollbar](https://github.com/mdbootstrap/perfect-scrollbar)，这个 bilibili 直播有用它，`overflow:hidden`，监听鼠标滚动，但是显然，不平滑。\r\n\r\n`starfall`参考了`element-plus`的实现，只隐藏滚动条。\r\n",en:""};export default()=>r.createElement(o,{requireDemo:a,requireRaw:u,requireMd:m});
