import{D as e,R as t,c as r}from"./vendor.a45e0c66.js";import{b as n,u as l}from"./index.c16b662c.js";import{P as o}from"./PageWalker.36c56082.js";const c=({children:r,wrapStyle:l})=>{const o=e.exports.useRef(null),c=e.exports.useRef(null),[s]=e.exports.useState(n),a=e.exports.useCallback((()=>{o.current&&s.emit("SCROLL",[100*o.current.scrollLeft/o.current.clientWidth,100*o.current.scrollTop/o.current.clientHeight])}),[s]);return e.exports.useEffect((()=>{if(!o.current)return;const e=o.current,t=()=>{if(!o.current)return;const e=100*o.current.clientHeight/o.current.scrollHeight,t=100*o.current.clientWidth/o.current.scrollWidth;s.emit("RESIZE",[t<100?t+"%":"",e<100?e+"%":""])};t();const r=new ResizeObserver((()=>{t()}));return r.observe(e),()=>{r.unobserve(e)}}),[s]),t.createElement("div",{className:"st-scroll-view-wrap",style:l,ref:c},t.createElement("div",{className:"st-scroll-view",ref:o,onScroll:a},r),t.createElement(i,{containerRef:o,wrapRef:c,mitt:s}),t.createElement(i,{vertical:!0,containerRef:o,wrapRef:c,mitt:s}))},s={vertical:{offsetSize:"offsetHeight",scrollValue:"scrollTop",scrollSize:"scrollHeight",size:"height",axis:"Y",mouseEventClientValue:"clientY",clientRectStart:"top"},horizontal:{offsetSize:"offsetWidth",scrollValue:"scrollLeft",scrollSize:"scrollWidth",size:"width",axis:"X",mouseEventClientValue:"clientX",clientRectStart:"left"}},i=({vertical:n,mitt:o,containerRef:c,wrapRef:i})=>{const a=s[n?"vertical":"horizontal"],[u,m]=e.exports.useState("0"),[p,f]=e.exports.useState(0);e.exports.useEffect((()=>{const e=n?1:0;o.on("RESIZE",(t=>m(t[e]))),o.on("SCROLL",(t=>f(t[e])))}),[o,n]);const d=e.exports.useRef(!1),v=e.exports.useRef(!1),[S,h]=e.exports.useState(!1),w=e.exports.useCallback((()=>{!S&&h(!0)}),[S]),b=e.exports.useCallback((()=>{S&&h(!1)}),[S]),E=e.exports.useRef(null),g=e.exports.useRef(null),x=e.exports.useCallback(((e,t)=>{if(!E.current)return;d.current=!0;const r=e=>{if(!g.current)return;if(!c.current)return;const r=100*(e[a.mouseEventClientValue]-g.current.getBoundingClientRect()[a.clientRectStart]-t)/g.current[a.offsetSize];c.current[a.scrollValue]=r/100*c.current[a.scrollSize]},n=e=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",n),d.current=!1,v.current&&b()};document.addEventListener("mousemove",r),document.addEventListener("mouseup",n)}),[a.offsetSize,a.mouseEventClientValue,a.clientRectStart,a.scrollValue,a.scrollSize,c,b]),R=l((e=>{if(e.nativeEvent.stopImmediatePropagation(),e.stopPropagation(),e.ctrlKey||[1,2].includes(e.button))return;if(!E.current)return;const t=e[a.mouseEventClientValue]-E.current.getBoundingClientRect()[a.clientRectStart];x(e,t)})),z=l((e=>{if(e.nativeEvent.stopImmediatePropagation(),e.stopPropagation(),e.ctrlKey||[1,2].includes(e.button))return;if(!g.current)return;if(!E.current)return;if(!c.current)return;const t=E.current[a.offsetSize]/2,r=100*(e[a.mouseEventClientValue]-g.current.getBoundingClientRect()[a.clientRectStart]-t)/c.current[a.offsetSize];if(c.current[a.scrollValue]=r*c.current[a.scrollSize]/100,!E.current)return;x(e,t)}));e.exports.useEffect((()=>{const e=()=>{v.current=!1,w()},t=()=>{v.current=!0,h(d.current)};if(!i.current)return;const r=i.current;return r.addEventListener("mousemove",e),r.addEventListener("mouseleave",t),()=>{r.removeEventListener("mousemove",e),r.removeEventListener("mouseleave",t)}}),[w,i]);const y=function({move:e,size:t,xy:r}){const n=`translate${r.axis}(${e}%)`;return{[r.size]:t,transform:n}}({size:u,move:p,xy:a});return t.createElement("div",{onMouseDown:z,className:r("st-scrollbar",n?"st-scrollbar--vertical":"st-scrollbar--horizontal",S&&"st-scrollbar--visible"),ref:g},t.createElement("div",{className:"st-scrollbar__thumb",style:y,onMouseDown:R,ref:E}))};const a={"/src/st-assets/ScrollView/basic.tsx":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:()=>t.createElement(t.Fragment,null,t.createElement(c,{wrapStyle:{height:200,fontSize:"18px"}},t.createElement("div",{style:{whiteSpace:"pre-wrap"}},". \n".repeat(30))),t.createElement("br",null),t.createElement("br",null),t.createElement(c,{wrapStyle:{height:200,width:200,fontSize:"18px"}},t.createElement("div",{style:{whiteSpace:"nowrap"}},". ".repeat(150))),t.createElement("br",null),t.createElement("br",null),t.createElement(c,{wrapStyle:{height:200,width:200,fontSize:"18px"}},t.createElement("div",null,t.createElement("div",{style:{width:400,height:600,background:"powderblue"}}))))})},u={basic:"import React from 'react';\r\nimport { ScrollView } from 'starfall';\r\n\r\nconst BasicUsage: React.FC = () => {\r\n  return (\r\n    <>\r\n      <ScrollView wrapStyle={{ height: 200, fontSize: '18px' }}>\r\n        <div style={{ whiteSpace: 'pre-wrap' }}>{'. \\n'.repeat(30)}</div>\r\n      </ScrollView>\r\n      <br />\r\n      <br />\r\n      <ScrollView wrapStyle={{ height: 200, width: 200, fontSize: '18px' }}>\r\n        <div style={{ whiteSpace: 'nowrap' }}>{'. '.repeat(150)}</div>\r\n      </ScrollView>\r\n      <br />\r\n      <br />\r\n      <ScrollView wrapStyle={{ height: 200, width: 200, fontSize: '18px' }}>\r\n        <div>\r\n          <div style={{ width: 400, height: 600, background: 'powderblue' }}></div>\r\n        </div>\r\n      </ScrollView>\r\n    </>\r\n  );\r\n};\r\nexport default BasicUsage;\r\n"},m={zh:"## ScrollView 滚动视图\r\n\r\n### 基本用法\r\n\r\n::demo{basic}\r\n\r\n### 原理\r\n\r\n- [mdbootstrap/perfect-scrollbar](https://github.com/mdbootstrap/perfect-scrollbar)，这个 bilibili 直播有用它，`overflow:hidden`，监听鼠标滚动，但是显然，不平滑。\r\n\r\n`starfall`参考了`element-plus`的实现，只隐藏滚动条。\r\n",en:""};export default()=>t.createElement(o,{requireDemo:a,requireRaw:u,requireMd:m});
