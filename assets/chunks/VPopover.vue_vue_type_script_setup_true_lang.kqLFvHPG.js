import{B as C,l as x,b as F,e as _,a as R,o as f,g as V}from"./theme.BWMAtRbQ.js";import{o as N}from"./onClickAway.B1uQNQO4.js";import{E as y,f as k,c as w,a6 as B,d as P,a7 as S,a8 as j,o as v,j as m,a as T,e as L,y as h,l as $,r as U,T as Z,F as q,a9 as z,Z as G}from"./framework.BYKI4aRn.js";const A=e=>y(l=>{const i=C();l(()=>i()),e(i)}),H=e=>{let l;const i=k(!1),n=w({get:()=>i.value,set:a=>{clearTimeout(l),i.value=a}}),o=k(!1),u=w(()=>e.trigger||"click");y(a=>{const[t,r,d]=[n.value,e.anchor,e.popper];if(t&&d&&r){const{dir:g,align:b,viewport:E,plugins:D=[R]}=e;a(x.auto(r,()=>{x(r,d,{dir:g,align:b,viewport:E,plugins:D}),o.value=!0}))}}),y(a=>{if(!(e!=null&&e.trap))return;const[t,r,d]=[n.value,e.anchor,e.popper];!t||!o.value||!d||a(F(d,typeof e.trap=="function"?e.trap:g=>g!==r))}),y(a=>{if(!n.value)return;const[t,r]=[e.anchor,e.popper];!t||!r||a(N([r,t],()=>n.value=!1))}),y(()=>{if(!o.value||!e.popper)return;if(!(e!=null&&e.animated)){n.value||(o.value=!1);return}const a=e.popper;a&&(n.value?_.cssTransition(a,"v-enter"):_.cssTransition(a,"v-leave",{done(){o.value=!1}}))});const s=w(()=>e.delay==null?[0,300]:Array.isArray(e.delay)?e.delay:[e.delay,e.delay]),p=()=>{clearTimeout(l),l=setTimeout(()=>{n.value=!0},s.value[0])},c=()=>{clearTimeout(l),l=setTimeout(()=>{n.value=!1},s.value[1])};return A(a=>{const t=e.anchor;t&&(a(f(t).keydown.exact(r=>{switch(r.key){case"ArrowUp":case"ArrowRight":case"ArrowDown":case"ArrowLeft":case" ":r.preventDefault(),n.value=!n.value;break;case"Escape":r.preventDefault(),n.value=!1;break}})),u.value==="click"?a(f(t).click.exact.prevent(()=>{n.value=!n.value})):u.value==="hover"&&(a(f(t).pointerenter.exact.prevent(p)),a(f(t).pointerout.exact.prevent(c))))}),A(a=>{const t=e.popper;t&&(a(f(t).keydown.exact(r=>{switch(r.key){case"Escape":r.preventDefault(),n.value=!1;break}})),u.value==="hover"&&t&&(a(f(t).pointerenter.exact.prevent(p)),a(f(t).pointerout.exact.prevent(c))))}),B({open:n,visible:o,play:p,pause:c})},I={key:0,"data-edge":"",tabindex:"0"},J={key:2,"data-edge":"",tabindex:"0"},Q=P({inheritAttrs:!1,__name:"VPopover",props:{trigger:{},trap:{type:[Function,Boolean]},animated:{type:Boolean},delay:{},dir:{},align:{},viewport:{},plugins:{}},setup(e,{expose:l}){const i=e,n=S(),o=k(),u=k(),s=H(B({...j(i),popper:u,anchor:o})),p=c=>z(V(n.default())||G("i"),{...c,ref:o});return l({anchor:o,popper:u,pop:s}),(c,a)=>(v(),m(q,null,[(v(),T(L(p(c.$attrs)))),(v(),T(Z,{to:"body"},[h(s).open?(v(),m("span",I)):$("",!0),h(s).open||h(s).visible?(v(),m("div",{key:1,"data-pop":"",ref_key:"popper",ref:u,class:"--action-sheet"},[U(c.$slots,"popper")],512)):$("",!0),h(s).open?(v(),m("span",J)):$("",!0)]))],64))}});export{Q as _};
