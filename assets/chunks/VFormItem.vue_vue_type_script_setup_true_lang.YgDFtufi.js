import{a2 as q,a4 as C,d as N,a3 as D,o as p,h as y,r as g,Z as G,a5 as O,a6 as P,c as R,e as Z,v as d,l as F,t as z,j as h,a as T,a7 as W,b as H}from"./framework.q6r8hxCe.js";import{_ as L}from"./VRadioGroup.vue_vue_type_script_setup_true_lang.idX1PMbL.js";import{_ as U}from"./VInput.vue_vue_type_script_setup_true_lang.NUZHxurN.js";import{i as J,B as K}from"./theme.KnmxTxGm.js";/**
 * @license MIT react-hook-form
 *//**
 * @license MIT react-hook-form
 *//**
 * @license MIT react-hook-form
 *//**
 * @license MIT react-hook-form
 *//**
 * @license MIT react-hook-form
 */const Q=(e,s)=>{const a=s.split(".");let t=e;for(const r of a)t=t[r];return t},S=(e,s,a)=>{const t=s.split("."),r=t.slice(0,-1),n=t[t.length-1];let i=e;for(const u of r)i=i[u];i[n]=a},X=(e,s)=>{const a=q(e),t=C({});return s({describeGroup(){},describeField:n=>("initialValue"in n&&S(a,n.name,n.initialValue),t[n.name]=n,n)}),{action(n){},fields:t,focus(n){},value:a,initialValue:1,reject(){},reset(n){},set(n,i){},async submit(){},async validate(n){},i:n=>n}},E=new Map;E.set("radio",L);E.set("text",U);const k={uuid:J("ARIA"),pathValueGetter:Q,pathValueSetter:S,describe:X,registry:E},be=N({__name:"VForm",props:{form:{}},setup(e){const s=e;return D("VForm",s.form),(a,t)=>(p(),y("form",{class:"VForm",onSubmit:t[0]||(t[0]=G(r=>s.form.submit(),["prevent"]))},[g(a.$slots,"default",{i:s.form.i})],32))}}),Y=e=>{if(typeof e=="object"&&!Array.isArray(e))return e;const[s,a]=[Array.isArray(e)?e[0]:e,Array.isArray(e)?e[1]:void 0],t={type:s.endsWith("!")?s.slice(0,-1):s};return s.endsWith("!")&&(t.required=!0),a&&(t.config=a),t},ee={fieldname:"字段"},o={default:"{{s}} 不匹配格式",required:"请输入 {{s}}",checked:"请先检阅 {{s}}",enum:"{{s}} 不在选项范围内",any:"{{s}} 必须为任意类型",string:"{{s}} 必须为字符类型",array:"{{s}} 必须为列表类型",number:"{{s}} 必须为数值类型",boolean:"{{s}} 必须为布尔类型",email:"{{s}} 不是有效的邮箱地址",type:"{{s}} 不匹配格式",ranges:{string:{len:"{{s}} 的长度必须等于 {{a}}",min:"{{s}} 的长度至少为 {{a}}",max:"{{s}} 的长度至多为 {{a}}",range:"{{s}} 的长度必须介于 {{a}} - {{b}}"},number:{len:"{{s}} 必须等于 {{a}}",min:"{{s}} 至少为 {{a}}",max:"{{s}} 至多为 {{a}}",range:"{{s}} 的值必须介于 {{a}} - {{b}}"},array:{len:"{{s}} 的长度必须等于 {{a}}",min:"{{s}} 的长度至少为 {{a}}",max:"{{s}} 的长度至多为 {{a}}",range:"{{s}} 的长度必须介于 {{a}} - {{b}}"}}},f=/\{\{a\}\}/,B=/\{\{b\}\}/,M=/\{\{s\}\}/,x=(e,s,a)=>{if(typeof s=="number"&&e!==s)return o.ranges[a].len.replace(f,""+s);if(Array.isArray(s)){const[t,r]=s;if(typeof t=="number"&&e<t)return t===r?o.ranges[a].len.replace(f,""+t):typeof r=="number"?o.ranges[a].range.replace(f,""+t).replace(B,""+r):o.ranges[a].min.replace(f,""+t);if(typeof r=="number"&&e>r)return t===r?o.ranges[a].len.replace(f,""+t):typeof t=="number"?o.ranges[a].range.replace(f,""+t).replace(B,""+r):o.ranges[a].max.replace(f,""+r)}},c=new Map;c.set("any",{type:()=>{}});c.set("string",{type:(e,s)=>{if(typeof e!="string")return o.string;if(typeof s=="number"||Array.isArray(s))return x(e.length,s,"string");if(s instanceof RegExp&&!s.test(e))return o.default},testEmpty:e=>e===""});c.set("number",{type:(e,s)=>{if(typeof e!="number"||!Number.isFinite(e)||Number.isNaN(e))return o.number;if(typeof s=="number"||Array.isArray(s))return x(e,s,"number")}});c.set("array",{type:(e,s)=>{if(!Array.isArray(e))return o.array;if(typeof s=="number"||Array.isArray(s))return x(e.length,s,"array")}});c.set("enum",{type:(e,s)=>{if(!(Array.isArray(s)?s:[s]).some(t=>Object.is(e,t)))return o.enum}});c.set("boolean",{type:e=>{if(typeof e!="boolean")return o.boolean}});c.set("checked",{type:e=>{if(e!==!0)return o.checked}});c.set("type",{type:(e,s)=>{if(s&&e&&!(e instanceof s))return o.default}});const te=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;c.set("email",{extends:"string",type(e){if(!te.test(e))return o.email}});const se=e=>e==null,I=(e,s,a=ee.fieldname)=>{var u,b,V;const t=Y(s),r=t.type&&c.get(t.type);if(r!=null&&r.extends){const A=I(e,{...t,type:r.extends},a);if(A)return A}const n=se(e)||((u=r==null?void 0:r.testEmpty)==null?void 0:u.call(r,e,t.config));if(!t.required&&n)return;if(t.required&&n)return t.message??o.required.replace(M,a);const i=(b=r==null?void 0:r.type)==null?void 0:b.call(r,e,t.config);return typeof i=="string"?t.message??i.replace(M,a):(V=t.validator)==null?void 0:V.call(t,e)},re={class:"FormItem"},ae={key:0,class:"FormItemHeader"},ne=["id"],oe={key:0,class:"f3"},ie={key:1,class:"f3"},le={key:2},ce={key:3,class:"[B] f2 tone:reimu Alert"},ue=F("i-feather",{i:"x-octagon"},null,-1),me={class:"px-1"},Ae=N({__name:"VFormItem",props:{name:{}},setup(e){const s=e;O();const a=k.uuid(),t=P("VForm"),r=t.fields[s.name],n=k.registry.get(r.type||"text"),i=R({get(){return k.pathValueGetter(t.value,r.name)},set(l){k.pathValueSetter(t.value,r.name,l),V().then(m=>u.value=m)}}),u=Z(),b=K(),V=async()=>{b();const l=b(new AbortController).signal,m=i.value,_=r.rules,v=r.label;if(_){let $;for(const j of _){if($=await I(m,j,v),l.aborted)throw new DOMException("","AbortError");if($)return $}}},A=Z(),w=R(()=>d(r.props));return(l,m)=>(p(),y("div",re,[d(r).label?(p(),y("div",ae,[F("div",{class:"FormItemTitle",id:d(a),onClick:m[0]||(m[0]=_=>{var v;return(v=A.value)==null?void 0:v.focus()}),"aria-hidden":"true"},z(d(r).label),9,ne),l.$slots.subtitle?(p(),y("div",oe,[g(l.$slots,"subtitle")])):h("",!0)])):h("",!0),g(l.$slots,"default",{props:w.value,model:i.value},()=>[(p(),T(H(d(n)),W({name:d(r).name,ref_key:"control",ref:A,modelValue:i.value,"onUpdate:modelValue":m[1]||(m[1]=_=>i.value=_)},w.value,{"aria-labelledby":d(a)}),null,16,["name","modelValue","aria-labelledby"]))]),l.$slots.description?(p(),y("div",ie,[g(l.$slots,"description")])):h("",!0),l.$slots.alert?(p(),y("div",le,[u.value?g(l.$slots,"alert",{key:0}):h("",!0)])):u.value?(p(),y("div",ce,[ue,F("div",me,z(u.value),1)])):h("",!0)]))}});export{k as F,be as _,Ae as a};
