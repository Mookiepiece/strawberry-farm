var S=Object.defineProperty;var x=(l,n,o)=>n in l?S(l,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[n]=o;var _=(l,n,o)=>x(l,typeof n!="symbol"?n+"":n,o);import{d as A,a4 as E,c as f,o as c,j as d,p as r,t as u,F as b,k as w,n as B,a1 as M,y as N}from"./framework.BjwmYqAO.js";const T={id:"TheStrawberryFarm"},$={class:"wallet"},K=["aria-disabled"],D={class:"Fieldset"},I=["onClick"],L={class:"TheBag"},O=["aria-pressed","onClick","onKeydown"],P={class:"SeedImage"},j={class:"SeedTitle"},q=A({__name:"Farm",setup(l){const n=new Map([["🍓",{name:"草莓",value:200,rate:30}],["🍇",{name:"葡萄",value:100,rate:30}],["🌽",{name:"玉米",value:50,rate:30}],["🍟",{name:"薯条",value:300,rate:10}]]);let o=0;class v{constructor(a){_(this,"id");_(this,"type");this.id=++o,this.type=a}}const t=E({wallet:300,bag:[new v("🍓"),new v("🍓")],current:null,fields:Array(9).fill(0).map(()=>({}))}),p=e=>{var a;t.current=((a=t.current)==null?void 0:a.id)===e.id?null:e},m=f(()=>t.wallet>=100),y=()=>{const e=[...n.entries()].map(([s,{rate:i}])=>[s,i]);let a=Math.random()*100-Number.EPSILON;for(;a>e[0][1];)a-=e[0][1],e.shift();t.wallet-=100,t.bag.push(new v(e[0][0]))},g=e=>{if(!t.current)return;const a=t.bag.indexOf(t.current);t.bag.splice(a,1),[e.seed,t.current]=[t.current,null],setTimeout(()=>e.done=!0,3e3)},k=e=>{if(!e.done)return;const{type:a}=e.seed;e.seed=void 0,e.done=!1,t.wallet+=n.get(a).value},C=e=>{e.seed?k(e):g(e)};return(e,a)=>(c(),d("div",T,[r("div",null,[r("div",$,u(t.wallet),1),r("div",{class:"store",role:"button","aria-disabled":!m.value,onClick:a[0]||(a[0]=s=>m.value&&y())}," 🎲 ",8,K)]),r("div",D,[(c(!0),d(b,null,w(t.fields,s=>(c(),d("div",{class:"Field",onClick:i=>C(s)},[r("div",{class:B(s.done?"Available":"")},u(s.seed?s.done?s.seed.type:"🌱":null),3)],8,I))),256))]),r("div",L,[(c(!0),d(b,null,w(t.bag,s=>{var i,h;return c(),d("div",{key:s.id,"aria-pressed":s.id===((i=t.current)==null?void 0:i.id),class:"Seed",role:"button",tabindex:"0",onClick:F=>p(s),onKeydown:M(F=>p(s),["space"])},[r("div",P,u(s.type),1),r("div",j,u((h=N(n).get(s.type))==null?void 0:h.name),1)],40,O)}),128))])]))}});export{q as default};
