import{d as p,f as i,E as h,o as b,j as _,p as d,a2 as c,t as R,I as j}from"./framework.qiMOmzvi.js";import{o as g}from"./theme.CGULKHWn.js";/* empty css                                                                        */const y=["data-dragging","data-dragover"],L={style:{"max-height":"100px"}},O=p({__name:"FormInputOfFile",props:{disabled:{type:Boolean}},setup(v){const u=v,o=i(""),r=i(!1),s=i(!1),f=n=>{const{files:t}=n.target,a=t[0];if([".png",".jpg",".jpeg",".webp",".avif"].some(e=>a.name.endsWith(e))){const e=document.createElement("img");e.src=URL.createObjectURL(a),e.decode().then(()=>{o.value=JSON.stringify({name:a.name,size:a.size,naturalWidth:e.naturalWidth,naturalHeight:e.naturalHeight},null,2),URL.revokeObjectURL(e.src)})}else if([".mp4",".webm"].some(e=>a.name.endsWith(e))){const e=document.createElement("video");e.src=URL.createObjectURL(a),e.onloadedmetadata=()=>{o.value=JSON.stringify({name:a.name,size:a.size,naturalWidth:e.videoWidth,naturalHeight:e.videoHeight,duration:e.duration},null,2),URL.revokeObjectURL(e.src)}}else if(a.size<10*1024*1024){const e=new FileReader;e.onload=l=>{o.value=""+e.result,console.log(1,l,e.result)},e.onprogress=l=>{console.log(2,l,e.result)},e.readAsText(a)}};h(n=>{u.disabled||(n(g(document.body).dragover(()=>{r.value=!0})),n(g(document.body).dragleave(t=>{t.relatedTarget||(r.value=!1)})))});const m=n=>{var a;const t=(a=n.dataTransfer)==null?void 0:a.files;o.value=[...t??[]].map(e=>e.name).join(`
`)};return(n,t)=>(b(),_("div",null,[d("label",{"data-dragging":r.value||void 0,"data-dragover":s.value||void 0,onDragover:t[0]||(t[0]=c(a=>!u.disabled&&(s.value=!0),["prevent"])),onDragleave:t[1]||(t[1]=c(a=>s.value=!1,["prevent"])),onDrop:c(m,["prevent"])},[d("input",{type:"file",onChange:f},null,32)],40,y),d("div",L,R(o.value),1)]))}}),W=j(O,[["__scopeId","data-v-bdc0c6bd"]]);export{W as default};
