import{d as _,z as A,A as B,c as D,f as y,o as v,i as f,F as S,j,x as b,l as k,n as w,$ as C,r as V,I as M,t as z}from"./framework.p8HH8TNW.js";import{w as E}from"./theme.myhLqNQT.js";const F=["id","tabindex","aira-disabled","aria-activedescendant","aria-multiselectable"],I=["id","onClick","aria-selected","aria-current","aria-disabled"],$=_({__name:"VPicker",props:A({multi:{type:Boolean},options:{},clearable:{type:Boolean},disabled:{type:Boolean},class:{},style:{type:[Boolean,null,String,Object,Array]},itemClass:{},itemStyle:{type:[Boolean,null,String,Object,Array]}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(m,{expose:x}){const n=B(m,"modelValue"),a=m,d=E(),i=D(()=>(a.options??[]).map((e,t)=>({label:typeof e=="object"&&e?e.label??e.value:""+e,value:typeof e=="object"&&e?e.value:e,disabled:typeof e=="object"&&e?e.disabled:!1,index:t}))),l=y(-1),g=()=>{(l.value<0||l.value>=i.value.length)&&(l.value=i.value.findIndex(e=>e.value===n.value&&!e.disabled),l.value===-1&&(l.value=i.value.findIndex(e=>!e.disabled)),l.value!==-1&&!a.multi&&!a.clearable&&u(i.value[l.value].value))},u=e=>{if(a.multi){const t=new Set(n.value);t.has(e)?t.delete(e):t.add(e),n.value=[...t];return}e!==n.value?n.value=e:a.clearable&&(n.value=null)},c=y(null),p=e=>{const t=i.value.slice(0,l.value),r=[...i.value.slice(l.value+1),...t][e<0?"findLast":"find"](o=>!o.disabled);if(r){const o=i.value.indexOf(r);return l.value=o,!a.multi&&!a.clearable&&u(r.value),o}return-1},h=e=>{var t,s;switch(e.key){case"ArrowUp":case"ArrowLeft":e.preventDefault(),p(-1);break;case"ArrowDown":case"ArrowRight":e.preventDefault(),p(1);break;case" ":if(e.preventDefault(),l.value<0||l.value>=i.value.length)return;u(i.value[l.value].value);break;case"Enter":e.preventDefault(),(s=(t=c.value.closest('form, [role="form"]'))==null?void 0:t.submit)==null||s.call(t);break}};return x({el:c}),(e,t)=>(v(),f("div",{ref_key:"el",ref:c,id:b(d),style:k(a.style),class:w(a.class),onFocus:g,onKeydown:C(h,["self","exact"]),role:"listbox",tabindex:a.disabled?-1:0,"aira-disabled":a.disabled,"aria-activedescendant":l.value===-1?"":b(d)+l.value,"aria-multiselectable":a.multi},[(v(!0),f(S,null,j(i.value,(s,r)=>(v(),f("div",{key:s.value,id:b(d)+r,onClick:o=>s.disabled?void 0:u(s.value),style:k(a.style),class:w(a.class),role:"option","aria-selected":a.multi?n.value.includes(s.value):s.value===n.value,"aria-current":r===l.value||void 0,"aria-disabled":a.disabled||s.disabled||void 0},[V(e.$slots,"default",{option:s},()=>[M(z(s.label),1)])],14,I))),128))],46,F))}});export{$ as _};
