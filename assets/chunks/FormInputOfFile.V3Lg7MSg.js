import{d as p,e as i,E as h,o as b,h as _,l as d,Z as u,t as R,I as y}from"./framework.q6r8hxCe.js";import{o as g}from"./theme.KnmxTxGm.js";import"./FormInputOfFile.vue_vue_type_style_index_0_scoped_cf75c24b_lang.w40geAFS.js";const L=["data-dragging","data-dragover"],O={style:{"max-height":"100px"}},j=p({__name:"FormInputOfFile",props:{disabled:{type:Boolean}},setup(v){const c=v,n=i(""),s=i(!1),r=i(!1),m=o=>{const{files:t}=o.target,a=t[0];if([".png",".jpg",".jpeg",".webp",".avif"].some(e=>a.name.endsWith(e))){const e=document.createElement("img");e.src=URL.createObjectURL(a),e.decode().then(()=>{n.value=JSON.stringify({name:a.name,size:a.size,naturalWidth:e.naturalWidth,naturalHeight:e.naturalHeight},null,2),URL.revokeObjectURL(e.src)})}else if([".mp4",".webm"].some(e=>a.name.endsWith(e))){const e=document.createElement("video");e.src=URL.createObjectURL(a),e.onloadedmetadata=()=>{n.value=JSON.stringify({name:a.name,size:a.size,naturalWidth:e.videoWidth,naturalHeight:e.videoHeight,duration:e.duration},null,2),URL.revokeObjectURL(e.src)}}else if(a.size<10*1024*1024){const e=new FileReader;e.onload=l=>{n.value=""+e.result,console.log(1,l,e.result)},e.onprogress=l=>{console.log(2,l,e.result)},e.readAsText(a)}};h(o=>{c.disabled||(o(g(document.body).dragover(()=>{s.value=!0})),o(g(document.body).dragleave(()=>{s.value=!1})))});const f=o=>{var a;const t=(a=o.dataTransfer)==null?void 0:a.files;n.value=[...t??[]].map(e=>e.name).join(`
`)};return(o,t)=>(b(),_("div",null,[d("label",{"data-dragging":s.value||void 0,"data-dragover":r.value||void 0,onDragover:t[0]||(t[0]=u(a=>!c.disabled&&(r.value=!0),["prevent"])),onDragleave:t[1]||(t[1]=a=>r.value=!1),onDrop:u(f,["prevent"])},[d("input",{type:"file",onChange:m},null,32)],40,L),d("div",O,R(n.value),1)]))}}),W=y(j,[["__scopeId","data-v-cf75c24b"]]);export{W as default};
