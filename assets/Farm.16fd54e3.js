var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,i=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&s(e,a,t[a]);if(n)for(var a of n(t))r.call(t,a)&&s(e,a,t[a]);return e},m=(e,n)=>t(e,a(n));import{R as c,m as o,D as d,c as _}from"./vendor.a45e0c66.js";const p=({title:e,children:t,warning:a})=>c.createElement("div",{style:{whiteSpace:"pre"}},[`\n／ ￣￣ ＼　\n|　ー　ー \\　 ／￣￣￣￣￣￣￣＼\n|　 ◉　◉ |   |　   ${e}    \\\n\\　　 ▱　/ ∠     ${t}   /\n ＼　　 イ　 \\ ________________/\n／　　　\\\n/　|　　　 \\\n|　|　　　 | |\n`.trim(),`\n／ ￣￣ ＼　\n|　乀　√   \\　 ／￣￣￣￣￣￣￣＼\n|　 ◉　◉ |   |　   ${e}    \\\n\\　  / 皿\\  / ∠    ${t}  /\n ＼　　 イ　 \\ ________________/\n／　　　\\\n/　|　　　 \\\n|　|　　　 | |\n`.trim()][a?1:0]);p.HuTao=()=>c.createElement("div",{style:{whiteSpace:"pre"}},"\n。  ____/ L \\___\n   ｜       \\ Y /    ｜\n ˡ  ———————— ˡ。\n  リ //  ー　ー \\\\   ▍        ————\n//  ‖‖　 ✪     ✪ ‖\\\\        /    —       —  \\\n  ｜‖\\   　 ▽    /‖         |          ▽         |\n   《‖ ＼ 　 イ  ‖》        \\                  /\n   》  ／ 「」\\   《   ＜    |            /    ＞\n《   /  |   =❈=  \\    》        /       /\n川  |   |     =·=    | |   《    /    /\n".trim()),p.Tank=()=>c.createElement("pre",null,"\n▄▄▄▄▄▄███〓█\n　　▂▃▄▅████▅▄▄▄▄●\n　　██████████████\n　　◥⊙▲⊙▲⊙▲⊙▲⊙▲⊙▲◤\n  ".trim());let f=0;const u=()=>f++,v=new Map([["🍓",{name:"草莓",value:200}],["🍇",{name:"葡萄",value:100}],["🌽",{name:"玉米",value:50}],["🍟",{name:"薯条",value:300}]]),g=c.createContext({farmMitt:{on(){},off(){},emit(){}}}),E=c.memo((({handleClick:e})=>{const[t,a]=d.exports.useState(null),[n,l]=d.exports.useState(!1),{farmMitt:r}=d.exports.useContext(g),s=t?n?t.type:"🌱":null;return c.createElement("div",{className:"sf-field",onClick:()=>{if(t)n&&(r.emit("HARVEST",t),a(null),l(!1));else{const t=e();t&&(r.emit("PLANT",void 0),a(t),setTimeout((()=>{l(!0)}),3e3))}}},c.createElement("div",{className:"sf-field__inner"},s))})),y=(e,t)=>{const a=e.findIndex(t);return-1!==a?[...e.slice(0,a),...e.slice(a+1,e.length)]:e},b=({children:e})=>{d.exports.useEffect((()=>{}));const[t,a]=d.exports.useState((()=>({fields:new Map,selectedBagItem:null,bag:[{id:u(),type:"🍓"},{id:u(),type:"🍓"}],wallet:300}))),[n]=d.exports.useState((()=>{const e=o();return e.on("SELECT_BAG_ITEM",(e=>a((t=>{var a;return m(i({},t),{selectedBagItem:(null==(a=t.selectedBagItem)?void 0:a.id)===e.id?null:e})})))),e.on("PLANT",(()=>a((e=>m(i({},e),{selectedBagItem:null,bag:y(e.bag,(t=>{var a;return(null==(a=e.selectedBagItem)?void 0:a.id)===t.id}))}))))),e.on("HARVEST",(e=>{a((t=>m(i({},t),{wallet:t.wallet+v.get(e.type).value})))})),e})),l=d.exports.useMemo((()=>({farmMitt:n})),[n]);return c.createElement(g.Provider,{value:l},c.createElement("div",{className:"sf-farm"},c.createElement("span",{className:"sf-farm__wallet"},t.wallet),c.createElement("span",{className:_("sf-farm__store",t.wallet<100&&"sf-farm__store--disabled"),onClick:()=>{var e,n;if(t.wallet>=100){const t=e=>{a((t=>m(i({},t),{bag:[...t.bag,{id:u(),type:e}],wallet:t.wallet-100})))},l={"🍓":30,"🍇":30,"🌽":30,"🍟":10},r=100*Math.random();console.log(r);const s=[...Object.entries(l)];for(let a=0;a<s.length;a++)if(s[a][1]=s[a][1]+(null!=(n=null==(e=s[a-1])?void 0:e[1])?n:0),s[a][1]>=r)return t(s[a][0])}}},"🎲"),c.createElement(w,null,[...Array(9).keys()].map((e=>c.createElement(E,{key:e,handleClick:()=>{if(t.selectedBagItem){return t.selectedBagItem}}}))))),c.createElement(I,{selectedBagItem:t.selectedBagItem,bag:t.bag}))},w=({children:e})=>c.createElement("div",{className:"sf-farm-field-set"},e),I=c.memo((({bag:e,selectedBagItem:t})=>c.createElement("div",{className:"sf-farm-bag"},e.map((({id:e,type:a})=>c.createElement(x,{key:e,id:e,type:a,active:(null==t?void 0:t.id)===e})))))),x=c.memo((({id:e,type:t,active:a})=>{var n;const l=d.exports.useContext(g);return c.createElement("div",{className:_("st-farm-plant-seed",a&&"st-farm-plant-seed--active"),onClick:()=>l.farmMitt.emit("SELECT_BAG_ITEM",{id:e,type:t})},c.createElement("div",{className:"st-farm-plant-seed__image"},t),c.createElement("div",{className:"st-farm-plant-seed__title"},null==(n=v.get(t))?void 0:n.name))}));export{p as D,b as F};
