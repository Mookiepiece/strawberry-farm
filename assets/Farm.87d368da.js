var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,c=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&s(e,a,t[a]);if(n)for(var a of n(t))r.call(t,a)&&s(e,a,t[a]);return e},i=(e,n)=>t(e,a(n));import{R as m,s as o,t as d,v as f,w as u,x as _,D as p,c as v}from"./vendor.268598cb.js";const g=({title:e,children:t,warning:a})=>m.createElement("div",{style:{whiteSpace:"pre"}},[`\n／ ￣￣ ＼　\n|　ー　ー \\　 ／￣￣￣￣￣￣￣＼\n|　 ◉　◉ |   |　   ${e}    \\\n\\　　 ▱　/ ∠     ${t}   /\n ＼　　 イ　 \\ ________________/\n／　　　\\\n/　|　　　 \\\n|　|　　　 | |\n`.trim(),`\n／ ￣￣ ＼　\n|　乀　√   \\　 ／￣￣￣￣￣￣￣＼\n|　 ◉　◉ |   |　   ${e}    \\\n\\　  / 皿\\  / ∠    ${t}  /\n ＼　　 イ　 \\ ________________/\n／　　　\\\n/　|　　　 \\\n|　|　　　 | |\n`.trim()][a?1:0]);g.HuTao=()=>m.createElement("div",{style:{whiteSpace:"pre"}},"\n。  ____/ L \\___\n   ｜       \\ Y /    ｜\n ˡ  ———————— ˡ。\n  リ //  ー　ー \\\\   ▍        ————\n//  ‖‖　 ✪     ✪ ‖\\\\        /    —       —  \\\n  ｜‖\\   　 ▽    /‖         |          ▽         |\n   《‖ ＼ 　 イ  ‖》        \\                  /\n   》  ／ 「」\\   《   ＜    |            /    ＞\n《   /  |   =❈=  \\    》        /       /\n川  |   |     =·=    | |   《    /    /\n".trim()),g.Tank=()=>m.createElement("pre",null,"\n▄▄▄▄▄▄███〓█\n　　▂▃▄▅████▅▄▄▄▄●\n　　██████████████\n　　◥⊙▲⊙▲⊙▲⊙▲⊙▲⊙▲◤\n  ".trim());var E=function(){return{all:e=e||new o,on:function(t,a){var n=e.get(t);n&&n.push(a)||e.set(t,[a])},off:function(t,a){var n=e.get(t);n&&d(n).call(n,f(n).call(n,a)>>>0,1)},emit:function(t,a){var n,l,r,s;u(n=_(l=e.get(t)||[]).call(l)).call(n,(function(e){e(a)})),u(r=_(s=e.get("*")||[]).call(s)).call(r,(function(e){e(t,a)}))}};var e};"undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?m.useLayoutEffect:m.useEffect;let w=0;const y=()=>w++,b=new Map([["🍓",{name:"草莓",value:200}],["🍇",{name:"葡萄",value:100}],["🌽",{name:"玉米",value:50}],["🍟",{name:"薯条",value:300}]]),x=m.createContext({farmMitt:{on(){},off(){},emit(){}}}),I=m.memo((({handleClick:e})=>{const[t,a]=p.exports.useState(null),[n,l]=p.exports.useState(!1),{farmMitt:r}=p.exports.useContext(x),s=t?n?t.type:"🌱":null;return m.createElement("div",{className:"sf-field",onClick:()=>{if(t)n&&(r.emit("HARVEST",t),a(null),l(!1));else{const t=e();t&&(r.emit("PLANT",void 0),a(t),setTimeout((()=>{l(!0)}),3e3))}}},m.createElement("div",{className:"sf-field__inner"},s))})),h=(e,t)=>{const a=e.findIndex(t);return-1!==a?[...e.slice(0,a),...e.slice(a+1,e.length)]:e},B=({children:e})=>{p.exports.useEffect((()=>{}));const[t,a]=p.exports.useState((()=>({fields:new Map,selectedBagItem:null,bag:[{id:y(),type:"🍓"},{id:y(),type:"🍓"}],wallet:300}))),[n]=p.exports.useState((()=>{const e=E();return e.on("SELECT_BAG_ITEM",(e=>a((t=>{var a;return i(c({},t),{selectedBagItem:(null==(a=t.selectedBagItem)?void 0:a.id)===e.id?null:e})})))),e.on("PLANT",(()=>a((e=>i(c({},e),{selectedBagItem:null,bag:h(e.bag,(t=>{var a;return(null==(a=e.selectedBagItem)?void 0:a.id)===t.id}))}))))),e.on("HARVEST",(e=>{a((t=>i(c({},t),{wallet:t.wallet+b.get(e.type).value})))})),e})),l=p.exports.useMemo((()=>({farmMitt:n})),[n]);return m.createElement(x.Provider,{value:l},m.createElement("div",{className:"sf-farm"},m.createElement("span",{className:"sf-farm__wallet"},t.wallet),m.createElement("span",{className:v("sf-farm__store",t.wallet<100&&"sf-farm__store--disabled"),onClick:()=>{var e,n;if(t.wallet>=100){const t=e=>{a((t=>i(c({},t),{bag:[...t.bag,{id:y(),type:e}],wallet:t.wallet-100})))},l={"🍓":30,"🍇":30,"🌽":30,"🍟":10},r=100*Math.random();console.log(r);const s=[...Object.entries(l)];for(let a=0;a<s.length;a++)if(s[a][1]=s[a][1]+(null!=(n=null==(e=s[a-1])?void 0:e[1])?n:0),s[a][1]>=r)return t(s[a][0])}}},"🎲"),m.createElement(N,null,[...Array(9).keys()].map((e=>m.createElement(I,{key:e,handleClick:()=>{if(t.selectedBagItem){return t.selectedBagItem}}}))))),m.createElement(S,{selectedBagItem:t.selectedBagItem,bag:t.bag}))},N=({children:e})=>m.createElement("div",{className:"sf-farm-field-set"},e),S=m.memo((({bag:e,selectedBagItem:t})=>m.createElement("div",{className:"sf-farm-bag"},e.map((({id:e,type:a})=>m.createElement(T,{key:e,id:e,type:a,active:(null==t?void 0:t.id)===e})))))),T=m.memo((({id:e,type:t,active:a})=>{var n;const l=p.exports.useContext(x);return m.createElement("div",{className:v("st-farm-plant-seed",a&&"st-farm-plant-seed--active"),onClick:()=>l.farmMitt.emit("SELECT_BAG_ITEM",{id:e,type:t})},m.createElement("div",{className:"st-farm-plant-seed__image"},t),m.createElement("div",{className:"st-farm-plant-seed__title"},null==(n=b.get(t))?void 0:n.name))}));export{g as D,B as F};
