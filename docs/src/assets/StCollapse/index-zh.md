## St Collapse 折叠面板

### 原理

如果你的面板有设置`height`，那么传统的动画方案就能实现。但面板是没有自定义设置高度属性时默认是 `height:auto`，此时动画不生效，所以应提前一帧设置高度。

Bootstrap 和 W3Schools 使用了 scrollHeight，这个属性有意思的地方在于它的值只和内部内容有关，你设置了`height`或者`max-height`它依旧保持不变。
所以我们的折叠面板的最大值是固定的，最小值也是固定的 0。
试想一下这种情况，折叠到了一半突然点击又反着折回去了，
因为折叠到一半的时候 clientHeight 和 offsetHeight 都是当前值，而通过永远不变的 scrollHeight 你可以知道最大值并且以此折返。

哪怕子元素设置了`height:0`，`scrollHeight` 依旧会将子元素的实际高度纳入计算，
以及可能会把子元素的下`margin`纳入计算导致出现一个`margin`距离的动画断层，
解决方法是新建[块格式化上下文 👍](https://zhuanlan.zhihu.com/p/131402341)，很简单，给 panel 设置 overflow:hidden 就可以了

- [Bootstrap: collapse.js](https://github.com/twbs/bootstrap/blob/main/js/src/collapse.js#L202)
- [W3schools: Collapse 👍](https://www.w3schools.com/howto/howto_js_collapsible.asp)

额外的：另一个投机取巧的方法是设置 `max-height` 代替 `height`, 但是可以看到明显的延迟，因为 max-height 总是一个溢出的很高的值，降低到本体的高度还是需要时间的

- [Toggle Collapse - Animate Height (pure JS) 👍](https://codepen.io/davidcochran/pen/RNOOEO)

### 手风琴

`Collapse.Summary`会给其子元素附加`active`类，并置换其 onClick 事件

DEMO{{./basic.tsx}}

### 独立面板

只用 Panel 提供动画效果，在复杂场景尤为有用

DEMO{{./individual.tsx}}

### 接口索引

| Collapse Property | Description         | Type       | Default | Required |
| ----------------- | ------------------- | ---------- | ------- | -------- |
| activeNames       | default activeNames | `string[]` | `[]`    |          |

| Collapse.Item Property | Description                                             | Type     | Default | Required |
| ---------------------- | ------------------------------------------------------- | -------- | ------- | -------- |
| name                   | custom key, default is auto generated by upper Collapse | `string` |         |          |

| Collapse.Panel Property | Description                                            | Type       | Default | Required |
| ----------------------- | ------------------------------------------------------ | ---------- | ------- | -------- |
| active                  | visibility control, could omit if inside Collapse.Item | `string[]` | `[]`    |          |
